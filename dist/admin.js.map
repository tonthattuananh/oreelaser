{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/scripts/admin/_admin.js","webpack:///./resources/scripts/admin/_custom_thumbnail_support.js","webpack:///./resources/scripts/admin/index.js","webpack:///./resources/styles/admin/index.scss","webpack:///external \"jQuery\""],"names":["stcAdminScripts","frame","init","wp","media","title","button","text","multiple","bindEvents","_this","jQuery","document","on","e","preventDefault","disableTheGrid","thisButton","post","action","post_id","data","response","success","hasClass","removeClass","addClass","enableTheGrid","postId","attachment","state","get","first","toJSON","console","log","attachmentId","id","attachment_id","find","attr","sizes","thumbnail","url","open","openMediaGallery","append","remove","initSocialLogin","$","click","w","h","left","screen","width","top","height","window","socialLoginReturn","result","location","href","redirect","mediaGridObserver","MutationObserver","mutations","i","length","j","addedNodes","element","elementClass","indexOf","attachmentPreview","children","handler","ajax","type","dataType","attachmentPreviewObserver","onAttachmentPage","urlLabel","value","val","ready","observe","body","childList","subtree"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./resources/scripts/admin/index.js\");\n","let stcAdminScripts = {\n    frame           : null,\n\n    init            : function () {\n        this.frame = wp.media({\n            title   : 'Chọn hình ảnh',\n            button  : {\n                text: 'Sử dụng hình ảnh này'\n            },\n            multiple: false  // Set to true to allow multiple files to be selected\n        });\n        this.bindEvents();\n    },\n\n    bindEvents : function() {\n        let _this = this;\n        jQuery(document).on('click', '[data-trigger-toggle-feature]', function (e) {\n            e.preventDefault();\n            _this.disableTheGrid();\n            let thisButton = jQuery(this);\n            jQuery.post('/wp-admin/admin-ajax.php', {\n                action : 'toggle_is_feature',\n                post_id: jQuery(this).data('post-id'),\n            }, function (response) {\n                if (response.success === true) {\n                    if (thisButton.hasClass('dashicons-yes')) {\n                        thisButton.removeClass('dashicons-yes').addClass('dashicons-no');\n                    } else {\n                        thisButton.removeClass('dashicons-no').addClass('dashicons-yes');\n                    }\n                }\n                _this.enableTheGrid();\n            });\n        });\n\n        jQuery(document).on('click', '[data-trigger-change-thumbnail-id]', function () {\n\n            let postId = jQuery(this).data('post-id');\n            let thisButton = jQuery(this);\n            let frame = wp.media({\n                title   : 'Chọn hình ảnh',\n                button  : {\n                    text: 'Sử dụng hình ảnh này'\n                },\n                multiple: false  // Set to true to allow multiple files to be selected\n            });\n            frame.on('select', function () {\n                let attachment = frame.state().get('selection').first().toJSON();\n                console.log(attachment);\n                let attachmentId = attachment.id;\n                _this.disableTheGrid();\n                jQuery.post('/wp-admin/admin-ajax.php', {\n                    action       : 'update_post_thumbnail_id',\n                    post_id      : postId,\n                    attachment_id: attachmentId\n                }, function (response) {\n                    if (response.success === true) {\n                        thisButton.find('img').attr('src', attachment.sizes.thumbnail.url);\n                    }\n                    _this.enableTheGrid();\n                });\n            });\n            frame.open();\n        });\n    },\n\n    openMediaGallery: function () {\n        if (this.frame) {\n            this.frame.open();\n        }\n    },\n\n    disableTheGrid  : function () {\n        jQuery('form#posts-filter').append(`<div class=\"gm-loader\" style=\"position:absolute;z-index:99999999;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background-color:rgba(192,192,192,0.51);color:#000000\">Đang cập nhật</div>`);\n    },\n\n    enableTheGrid   : function () {\n        jQuery('form#posts-filter').find('.gm-loader').remove();\n    },\n\n    initSocialLogin  : function () {\n        $('.gm-social-login__item').click(function (e) {\n            e.preventDefault();\n            let url = $(this).data('url');\n            let title = $(this).data('title');\n            let w = 800;\n            let h = 400;\n            let left = (screen.width / 2) - (w / 2);\n            let top = (screen.height / 2) - (h / 2);\n            window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);\n        });\n    },\n\n    socialLoginReturn: function (result) {\n        if (result.success === true) {\n            window.location.href = result.redirect;\n        }\n    },\n}\n\njQuery(function () {\n    stcAdminScripts.init();\n});\n","// create a mutation observer to look for added 'attachments' in the media uploader\nlet mediaGridObserver = new MutationObserver(function (mutations) {\n\n    // look through all mutations that just occured\n    for (let i = 0; i < mutations.length; i++) {\n\n        // look through all added nodes of this mutation\n        for (let j = 0; j < mutations[i].addedNodes.length; j++) {\n\n            //get the applicable element\n            let element = jQuery(mutations[i].addedNodes[j]);\n\n            //execute only if we have a class\n            if (element.attr('class')) {\n                let elementClass = element.attr('class');\n\n                // find all 'attachments'\n                if (element.attr('class').indexOf('attachment') !== -1) {\n\n                    //find attachment inner (which contains subtype info)\n                    let attachmentPreview = element.children('.attachment-preview');\n                    if (attachmentPreview.length !== 0) {\n\n                        //only run for SVG elements\n                        if (attachmentPreview.attr('class').indexOf('subtype-svg+xml') !== -1) {\n\n                            let handler = function (element) {\n                                jQuery.ajax({\n                                    url     : '/wp-admin/admin-ajax.php',\n                                    type    : \"POST\",\n                                    dataType: 'html',\n                                    data    : {\n                                        'action'      : 'stc_get_attachment_url_thumbnail',\n                                        'attachmentID': element.attr('data-id')\n                                    },\n                                    success : function (data) {\n                                        if (data) {\n                                            element.find('img').attr('src', data);\n                                            element.find('.filename').text('SVG Image');\n                                        }\n                                    }\n                                });\n                            }(element);\n                        }\n                    }\n                }\n            }\n        }\n    }\n});\n\nlet attachmentPreviewObserver = new MutationObserver(function (mutations) {\n    for (var i = 0; i < mutations.length; i++) {\n        for (var j = 0; j < mutations[i].addedNodes.length; j++) {\n            var element = $(mutations[i].addedNodes[j]);\n            var onAttachmentPage = false;\n            if ((element.hasClass('attachment-details')) || element.find('.attachment-details').length != 0) {\n                onAttachmentPage = true;\n            }\n\n            if (onAttachmentPage == true) {\n                var urlLabel = element.find('label[data-setting=\"url\"]');\n                if (urlLabel.length != 0) {\n                    var value = urlLabel.find('input').val();\n                    element.find('.details-image').attr('src', value);\n                }\n            }\n        }\n    }\n});\n\njQuery(document).ready(function () {\n    mediaGridObserver.observe(document.body, {\n        childList: true,\n        subtree  : true\n    });\n\n    // attachmentPreviewObserver.observe(document.body, {\n    //     childList: true,\n    //     subtree  : true\n    // });\n});\n","// eslint-disable-next-line no-unused-vars\nimport config from '@config';\nimport '@styles/admin';\n\n// import 'airbnb-browser-shims'; // Uncomment if needed\n\n\n// Support preview for svg file\nimport '@scripts/admin/_admin.js';\nimport '@scripts/admin/_custom_thumbnail_support.js';\n","// removed by extract-text-webpack-plugin","module.exports = jQuery;"],"sourceRoot":""}